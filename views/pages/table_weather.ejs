<!DOCTYPE html>
<html>
<head>
    <% include ../partials/header.ejs %>
    <script src="/scripts/tables.js"></script>
</head>

<body class="container">
    <% include ../partials/nav.ejs %>

    <h1>Weather Tables</h1>
    <p>What is the weather for the day like? What is the temperature?
    </p>
    <p>A random weather pattern is generated by rolling a virtual <strong>d100</strong>
        and presenting that choice based on a lookup table.
    </p>
    <p>If one is more interested, they can use the advanced table,
        which uses a <strong>d1000</strong> for a lookup table.
    </p>
    <p>Using the dropdown, one can select the environment for a more
        realistic set of weather conditions.
    </p>

    <a href='https://github.com/Fleker/mydnd-party/issues/new' target="_blank" id='suggest_item'>Make a suggestion</a>

    <div id='content'></div>

    <select id='environment' class='form-control w-auto mt-2 mb-2'>
        <option value="autumn1">Autumn (Mild Climate)</option>
        <option value="autumn2">Autumn (Cold Climate)</option>
        <option value="winter1">Winter (Mild Climate)</option>
    </select>
    <div class="text-center">
        <button onclick='reroll(100)' class='reroll flat btn btn-primary'>Re-Roll</button>
        <button onclick='reroll(1000)' class='reroll flat btn btn-primary'>Roll Advanced Table</button>
    </div>

    <script>
        addToLookupTable('Mild (55F)', 0, 10, 'autumn1');
        addToLookupTable('Chilly (50F)', 11, 40, 'autumn1');
        addToLookupTable('Cold Snap (35F)', 41, 50, 'autumn1');
        addToLookupTable('Chilly & Cloudy (45F)', 51, 60, 'autumn1');
        addToLookupTable('Raining (40F)', 61, 80, 'autumn1');
        addToLookupTable('Windy (35F)', 81, 90, 'autumn1');
        addToLookupTable('Snow (30F)', 91, 95, 'autumn1');
        addToLookupTable('Thunderstorm (35F)', 96, 98, 'autumn1');
        addToLookupTable('Tornado (45F)', 99, 99, 'autumn1');
        addToLookupTable('Early Blizzard (25F)', 100, 100, 'autumn1');

        addToLookupTable('Chilly (50F)', 101, 500, 'autumn1');
        addToLookupTable('Chilly & Cloudy (45F)', 501, 590, 'autumn1');
        addToLookupTable('Chilly & Gray Skies (45F)', 591, 600, 'autumn1');
        addToLookupTable('Light rain (40F)', 601, 650, 'autumn1');
        addToLookupTable('Misty (40F)', 651, 700, 'autumn1');
        addToLookupTable('Damp (40F)', 701, 750, 'autumn1');
        addToLookupTable('Moderate Rain (40F)', 751, 800, 'autumn1');
        addToLookupTable('Windy (35F)', 801, 900, 'autumn1');
        addToLookupTable('Snow (30F)', 901, 910, 'autumn1');
        addToLookupTable('Hail (30F)', 911, 930, 'autumn1');
        addToLookupTable('Light dusting of snow (30F)', 931, 950, 'autumn1');
        addToLookupTable('Thunderstorm (35F)', 951, 980, 'autumn1');
        addToLookupTable('Heavy wind and rain (35F)', 981, 1000, 'autumn1');


        addToLookupTable('Mild (45F)', 0, 10, 'autumn2');
        addToLookupTable('Chilly (40F)', 11, 40, 'autumn2');
        addToLookupTable('Cold Snap (25F)', 41, 50, 'autumn2');
        addToLookupTable('Chilly & Cloudy (40F)', 51, 60, 'autumn2');
        addToLookupTable('Raining (35F)', 61, 70, 'autumn2');
        addToLookupTable('Windy (40F)', 71, 80, 'autumn2');
        addToLookupTable('Snow (30F)', 81, 95, 'autumn2');
        addToLookupTable('Thunderstorm (25F)', 96, 99, 'autumn2');
        addToLookupTable('Blizzard (10F)', 100, 100, 'autumn2');

        addToLookupTable('Chilly (40F)', 101, 500, 'autumn2');
        addToLookupTable('Chilly & Cloudy (40F)', 501, 590, 'autumn2');
        addToLookupTable('Chilly & Gray Skies (40F)', 591, 600, 'autumn2');
        addToLookupTable('Light rain (35F)', 601, 625, 'autumn2');
        addToLookupTable('Misty (35F)', 626, 650, 'autumn2');
        addToLookupTable('Damp (35F)', 651, 675, 'autumn2');
        addToLookupTable('Moderate Rain (35F)', 676, 700, 'autumn2');
        addToLookupTable('Windy (40F)', 701, 800, 'autumn2');
        addToLookupTable('Snow (25F)', 801, 850, 'autumn2');
        addToLookupTable('Hail (25F)', 851, 875, 'autumn2');
        addToLookupTable('Light dusting of snow (25F)', 876, 950, 'autumn2');
        addToLookupTable('Thunderstorm (25F)', 951, 980, 'autumn2');
        addToLookupTable('Heavy wind and rain (25F)', 981, 1000, 'autumn2');


        addToLookupTable('Sunny & Mild (40F)', 0, 15, 'winter1');
        addToLookupTable('Chilly (30F)', 16, 30, 'winter1');
        addToLookupTable('Gray skies (30F)', 31, 45, 'winter1');
        addToLookupTable('Chilly and windy (25F)', 46, 60, 'winter1');
        addToLookupTable('Light dusting of snow (20F)', 61, 75, 'winter1');
        addToLookupTable('Light snow (20F)', 76, 85, 'winter1');
        addToLookupTable('Snow (20F)', 86, 90, 'winter1');
        addToLookupTable('Heavy snow (15F)', 91, 95, 'winter1');
        addToLookupTable('Severe cold snap and heavy winds (0F)', 96, 97);
        addToLookupTable('Blizzard (15F)', 98, 99, 'winter1');
        addToLookupTable('Severe Blizzard (0F)', 100, 100, 'winter1');

        addToLookupTable('Cold snap (20F)', 151, 200, 'winter1');
        addToLookupTable('Warm (50F)', 201, 250, 'winter1');
        addToLookupTable('Light rain (35F)', 251, 260, 'winter1');
        addToLookupTable('Thunderstorm (35F)', 261, 265, 'winter1');
        addToLookupTable('Hail (30F)', 266, 270, 'winter1');
        addToLookupTable('Sleet (30F)', 271, 280, 'winter1');
        addToLookupTable('Foggy (40F)', 281, 290, 'winter1');
        addToLookupTable('Heat wave (55F)', 291, 300, 'winter1');
        addToLookupTable('Gray skies and chilly (30F)', 300, 999, 'winter1');
        addToLookupTable('Severe Blizzard (-5F)', 1000, 1000, 'winter1');

        function reroll(length) {
            let environment = document.querySelector('#environment').value;
            let res = pullFromLookupTable(length, environment);
            document.querySelector('#content').innerHTML = `${res.value} <span class='subcontent'>(${res.index})</span>`;
        }
    </script>
</body>
</html>
