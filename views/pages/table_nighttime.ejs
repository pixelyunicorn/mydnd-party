<!DOCTYPE html>
<html>
<head>
    <% include ../partials/header.ejs %>
    <script src="/scripts/tables.js"></script>
    <style>
    </style>
</head>

<body class="container">
    <% include ../partials/nav.ejs %>

    <h1>Nighttime Encounter Generator</h1>
    <p>When you're camping at night, you may want someone to keep watch of
        your surroundings. Otherwise, you may end up finding something or
        someone approaching your campsite.
    </p>
    <p>A random encounter is generated by rolling a virtual <strong>d100</strong>
        and presenting that choice based on a lookup table.
    </p>
    <p>If one is more interested, they can use the advanced table,
        which uses a <strong>d1000</strong> for a lookup table.
    </p>
    <p>Using the dropdown, one can select the environment for a more
        realistic set of encounters.
    </p>

    <a href='https://github.com/Fleker/mydnd-party/issues/new' target="_blank" id='suggest_item'>Make a suggestion</a>

    <div id='content'></div>

    <select id='environment' class='form-control w-auto mt-2 mb-2'>
        <option value="woods">Woods</option>
        <option value="farm">Farmland</option>
    </select>
    <div class='text-center'>
        <button onclick='reroll(100)' class='reroll flat btn btn-primary'>Re-Roll</button>
        <button onclick='reroll(1000)' class='reroll flat btn btn-primary'>Roll Advanced Table</button>
    </div>

    <script>
        addToLookupTable('Nothing', 0, 50, 'woods');
        addToLookupTable('Nothing', 101, 510, 'woods');
        addToLookupTable('Fox', 51, 60, 'woods');
        addToLookupTable('Fox', 511, 610, 'woods');
        addToLookupTable('Raccoon', 61, 65, 'woods');
        addToLookupTable('Raccoon', 611, 640, 'woods');
        addToLookupTable('Raccoon with rabies', 641, 650, 'woods');
        addToLookupTable('Wolf', 66, 70, 'woods');
        addToLookupTable('Wolf', 661, 690, 'woods');
        addToLookupTable('Pack of wolves', 691, 700, 'woods');
        addToLookupTable('Bear', 71, 80, 'woods');
        addToLookupTable('Bear', 711, 790, 'woods');
        addToLookupTable('Mother bear and cubs', 791, 800, 'woods');
        addToLookupTable('Mouse', 81, 85, 'woods');
        addToLookupTable('Mouse', 801, 850, 'woods');
        addToLookupTable('Rabbit', 86, 90, 'woods');
        addToLookupTable('Rabbit', 851, 900, 'woods');
        addToLookupTable('Boar', 91, 99, 'woods');
        addToLookupTable('Boar', 901, 1000, 'woods');
        addToLookupTable('Forest fire', 100, 100, 'woods');

        addToLookupTable('Nothing', 0, 40, 'farm');
        addToLookupTable('Nothing', 101, 400, 'farm');
        addToLookupTable('Fox', 41, 45, 'farm');
        addToLookupTable('Fox', 401, 450, 'farm');
        addToLookupTable('Wolf', 46, 50, 'farm');
        addToLookupTable('Wolf', 451, 500, 'farm');
        addToLookupTable('Horse', 51, 60, 'farm');
        addToLookupTable('Horse', 501, 550, 'farm');
        addToLookupTable('Wild Horse', 551, 575, 'farm');
        addToLookupTable('Horse with broken leg', 576, 580);
        addToLookupTable('Baby horse', 581, 590);
        addToLookupTable('Parent horse with child', 591, 600);
        addToLookupTable('Skunk', 61, 65, 'farm');
        addToLookupTable('Skunk', 601, 649, 'farm');
        addToLookupTable('Angry skunk', 650, 650, 'farm');
        addToLookupTable('Cow', 66, 70, 'farm');
        addToLookupTable('Cow', 651, 695, 'farm');
        addToLookupTable('Angry bull', 696, 700, 'farm');
        addToLookupTable('Chicken', 71, 75, 'farm');
        addToLookupTable('Chicken', 701, 750, 'farm');
        addToLookupTable('Rooster', 76, 80, 'farm');
        addToLookupTable('Rooster', 751, 800, 'farm');
        addToLookupTable('Wild pig', 81, 84, 'farm');
        addToLookupTable('Wild pig', 801, 840, 'farm');
        addToLookupTable('Sheep', 85, 88, 'farm');
        addToLookupTable('Sheep', 841, 880, 'farm');
        addToLookupTable('Sheep dog', 89, 90, 'farm');
        addToLookupTable('Sheep dog', 881, 898, 'farm');
        addToLookupTable('Pregnant sheep dog', 899, 899, 'farm');
        addToLookupTable('Sheep dog with rabies', 900, 900, 'farm');
        addToLookupTable('Bat', 91, 95, 'farm');
        addToLookupTable('Bat', 901, 930, 'farm');
        addToLookupTable('Vampire bat', 931, 940, 'farm');
        addToLookupTable('Swarm of bats', 941, 950, 'farm');
        addToLookupTable('Cat', 96, 98, 'farm');
        addToLookupTable('Cat', 951, 980, 'farm');
        addToLookupTable('Mouse', 99, 100, 'farm');
        addToLookupTable('Mouse', 981, 990, 'farm');
        addToLookupTable('Rat', 991, 1000, 'farm');

        function reroll(length) {
            let environment = document.querySelector('#environment').value;
            let res = pullFromLookupTable(length, environment);
            document.querySelector('#content').innerHTML = `${res.value} <span class='subcontent'>(${res.index})</span>`;
        }
    </script>
</body>
</html>
